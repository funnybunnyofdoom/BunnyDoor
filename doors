-- This program will form the API for operating
-- Doors in the laboratory
-- Author: FunnyBunnyofDOOM

local timer = 15 --ticks to count

function open() --Emits a signal to close the door
  local file = fs.open("documents/timer.cfg",'r')
    timer = file.readLine()
    timer = tonumber(timer)
  
  file.close()
  disk.eject("bottom") -- Handles disk drive?
  term.clear()
  term.setCursorPos(1,1)
  term.write("Elevator Open")
  redstone.setAnalogOutput("back",10)
  if timer ~= 50 then
    for i=0,timer,1 do
      term.setCursorPos(1,1)
      term.clear()
      print(timer - i)
      os.sleep(1)
      term.setCursorPos(1,1) 
    end
  end  
  term.clear()
  term.setCursorPos(1,1)
  term.write("Elevator Closed")
  if timer ~= 50 then
    redstone.setAnalogOutput("back",0)
  end
  term.setCursorPos(1,1)
end
